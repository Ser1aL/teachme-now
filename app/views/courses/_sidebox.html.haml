.span3.offset1
  %aside
    .sidebox.course-sidebox
      .price-box
        .price
          = t 'lesson.price'
          %b
            - if course.lessons.present?
              = '%d,00' % course.calculate_lessons_price
            - else
              0.00
          = t 'currency'
        = link_to t('course_form.edit_course'), edit_course_path(course), class: 'edit' if course.is_owner?(current_user)
        - if course.buyable_for?(current_user)
          %a{:href => "#"} билет на весь курс
        - elsif course.is_owner?(current_user)
          = link_to t('course_form.edit_course'), edit_course_path(course), class: 'edit'
        - else
          %a{:href => "#"} NOT AVAILABLE

      .lessons-list
        - upcoming_lessons = course.lessons.upcoming
        - upcoming_lessons.each_with_index do |lesson, index|
          .general-info
            %h4= t 'lesson.will_take_place', index: index + 1
            %address
              %i.icon-map-marker
              = t("lesson.address", { city: t("lesson.cities.#{lesson.city.downcase}"), address_line: lesson.address_line })
            .time
              %span
                %i.icon-time
                = Russian::strftime(lesson.start_datetime, '%d %B')
              %span= t('lesson.start_at', time: lesson.start_datetime.strftime('%H:%M'))
            .duration
              %i.icon-timing
              = format_duration(lesson.duration)
            .sales-info= t('user.lesson_percentage_bought', percent: ((lesson.places_taken.to_f / lesson.capacity.to_f)*100).to_i)